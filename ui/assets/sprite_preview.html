<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Pixel Sprite Preview - Orbital Greenhouse</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    background: #0a0b14;
    color: #f5f0e1;
    font-family: 'Courier New', monospace;
    overflow-x: hidden;
  }
  h1 {
    text-align: center;
    padding: 20px;
    color: #ffb94f;
    font-size: 1.4em;
    letter-spacing: 4px;
    text-transform: uppercase;
  }
  .row {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 16px;
    padding: 0 20px 20px;
  }
  .card {
    background: #1e293b;
    border: 1px solid #334155;
    padding: 12px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .card canvas {
    image-rendering: pixelated;
  }
  .card .label {
    margin-top: 8px;
    font-size: 0.7em;
    color: #ffb94f;
    text-transform: uppercase;
    letter-spacing: 2px;
    text-align: center;
  }
  .section-title {
    text-align: center;
    padding: 16px 0 8px;
    color: #7ec4cf;
    font-size: 0.9em;
    letter-spacing: 3px;
    text-transform: uppercase;
    border-top: 1px solid #334155;
    margin-top: 8px;
  }
  #scene-canvas {
    display: block;
    margin: 20px auto;
    border: 1px solid #334155;
    image-rendering: pixelated;
  }
</style>
</head>
<body>

<h1>Orbital Greenhouse - Sprite Atlas</h1>

<!-- Individual sprite previews -->
<div class="section-title">Cargo Pods</div>
<div class="row">
  <div class="card"><canvas id="pod-neutral" width="80" height="80"></canvas><div class="label">Neutral</div></div>
  <div class="card"><canvas id="pod-flagged" width="80" height="80"></canvas><div class="label">Flagged</div></div>
  <div class="card"><canvas id="pod-clear"   width="80" height="80"></canvas><div class="label">Clear</div></div>
  <div class="card"><canvas id="pod-small"   width="80" height="80"></canvas><div class="label">Small (0.5x)</div></div>
  <div class="card"><canvas id="pod-large"   width="120" height="120"></canvas><div class="label">Large (1.5x)</div></div>
</div>

<div class="section-title">Plant Growth Stages</div>
<div class="row">
  <div class="card"><canvas id="plant-seed"    width="80" height="80"></canvas><div class="label">Seed</div></div>
  <div class="card"><canvas id="plant-sprout"  width="80" height="80"></canvas><div class="label">Sprout</div></div>
  <div class="card"><canvas id="plant-growing" width="80" height="80"></canvas><div class="label">Growing</div></div>
  <div class="card"><canvas id="plant-bloom-r" width="80" height="80"></canvas><div class="label">Bloom (Red)</div></div>
  <div class="card"><canvas id="plant-bloom-y" width="80" height="80"></canvas><div class="label">Bloom (Yellow)</div></div>
  <div class="card"><canvas id="plant-bloom-p" width="80" height="80"></canvas><div class="label">Bloom (Purple)</div></div>
  <div class="card"><canvas id="plant-bloom-k" width="80" height="80"></canvas><div class="label">Bloom (Pink)</div></div>
</div>

<div class="section-title">Pattern Card Icons</div>
<div class="row">
  <div class="card"><canvas id="icon-wash"       width="60" height="60"></canvas><div class="label">Wash Ring</div></div>
  <div class="card"><canvas id="icon-velocity"    width="60" height="60"></canvas><div class="label">Velocity</div></div>
  <div class="card"><canvas id="icon-spoofing"    width="60" height="60"></canvas><div class="label">Spoofing</div></div>
  <div class="card"><canvas id="icon-structuring" width="60" height="60"></canvas><div class="label">Structuring</div></div>
  <div class="card"><canvas id="icon-hub"         width="60" height="60"></canvas><div class="label">Hub</div></div>
</div>

<div class="section-title">Full Animated Scene</div>
<canvas id="scene-canvas" width="900" height="500"></canvas>

<script src="pixel_sprites.js"></script>
<script>
// ---- Individual static previews ----

function drawOnCanvas(id, fn) {
  const c = document.getElementById(id);
  const ctx = c.getContext('2d');
  fn(ctx, c.width, c.height);
}

// Pods
drawOnCanvas('pod-neutral', (ctx, w, h) => {
  PixelSprites.drawCargoPodNeutral(ctx, w/2, h/2, 3);
});
drawOnCanvas('pod-flagged', (ctx, w, h) => {
  PixelSprites.drawCargoPodFlagged(ctx, w/2, h/2, 3, { time: 0.5, shake: 1 });
});
drawOnCanvas('pod-clear', (ctx, w, h) => {
  PixelSprites.drawCargoPodClear(ctx, w/2, h/2, 3);
});
drawOnCanvas('pod-small', (ctx, w, h) => {
  PixelSprites.drawCargoPodNeutral(ctx, w/2, h/2, 1.5);
});
drawOnCanvas('pod-large', (ctx, w, h) => {
  PixelSprites.drawCargoPodNeutral(ctx, w/2, h/2, 4.5);
});

// Plants
drawOnCanvas('plant-seed', (ctx, w, h) => {
  PixelSprites.drawPlantSeed(ctx, w/2, h/2, 3);
});
drawOnCanvas('plant-sprout', (ctx, w, h) => {
  PixelSprites.drawPlantSprout(ctx, w/2, h/2, 3);
});
drawOnCanvas('plant-growing', (ctx, w, h) => {
  PixelSprites.drawPlantGrowing(ctx, w/2, h/2, 3);
});
drawOnCanvas('plant-bloom-r', (ctx, w, h) => {
  PixelSprites.drawPlantBloom(ctx, w/2, h/2, 3, { petalColor: PixelSprites.colors.petalRed });
});
drawOnCanvas('plant-bloom-y', (ctx, w, h) => {
  PixelSprites.drawPlantBloom(ctx, w/2, h/2, 3, { petalColor: PixelSprites.colors.petalYellow });
});
drawOnCanvas('plant-bloom-p', (ctx, w, h) => {
  PixelSprites.drawPlantBloom(ctx, w/2, h/2, 3, { petalColor: PixelSprites.colors.petalPurple });
});
drawOnCanvas('plant-bloom-k', (ctx, w, h) => {
  PixelSprites.drawPlantBloom(ctx, w/2, h/2, 3, { petalColor: PixelSprites.colors.petalPink });
});

// Pattern icons
drawOnCanvas('icon-wash', (ctx, w, h) => {
  PixelSprites.drawPatternIcon(ctx, w/2, h/2, 'wash_ring', 3);
});
drawOnCanvas('icon-velocity', (ctx, w, h) => {
  PixelSprites.drawPatternIcon(ctx, w/2, h/2, 'velocity', 3);
});
drawOnCanvas('icon-spoofing', (ctx, w, h) => {
  PixelSprites.drawPatternIcon(ctx, w/2, h/2, 'spoofing', 3);
});
drawOnCanvas('icon-structuring', (ctx, w, h) => {
  PixelSprites.drawPatternIcon(ctx, w/2, h/2, 'structuring', 3);
});
drawOnCanvas('icon-hub', (ctx, w, h) => {
  PixelSprites.drawPatternIcon(ctx, w/2, h/2, 'hub', 3);
});


// ---- Full animated scene ----
(function() {
  const canvas = document.getElementById('scene-canvas');
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  // Pod animation state
  const pods = [
    { x: -40, y: H * 0.35, type: 'neutral', label: 'TRD-101', speed: 45 },
    { x: -120, y: H * 0.50, type: 'flagged', label: 'TRD-102', speed: 35 },
    { x: -200, y: H * 0.65, type: 'neutral', label: 'TRD-103', speed: 55 },
  ];

  // Plant state in greenhouse
  const plants = [
    { x: W * 0.78 - 30, stage: 3, petalColor: PixelSprites.colors.petalRed },
    { x: W * 0.78,      stage: 2, petalColor: PixelSprites.colors.petalYellow },
    { x: W * 0.78 + 30, stage: 3, petalColor: PixelSprites.colors.petalPurple },
    { x: W * 0.78 + 60, stage: 1, petalColor: PixelSprites.colors.petalPink },
    { x: W * 0.78 - 60, stage: 0, petalColor: PixelSprites.colors.petalYellow },
  ];

  // Brain pulse queue
  let brainPulses = [];
  let lastPulseTime = 0;

  function frame(timestamp) {
    const t = timestamp / 1000;

    // clear
    ctx.fillStyle = PixelSprites.colors.deepSpace;
    ctx.fillRect(0, 0, W, H);

    // starfield
    PixelSprites.drawStarfield(ctx, W, H, { starCount: 80, time: t });

    // dot grid
    PixelSprites.drawDotGrid(ctx, W, H, { spacing: 25 });

    // greenhouse dome (right side)
    PixelSprites.drawGreenhouseDome(ctx, W * 0.78, H * 0.15, W * 0.35, H * 0.65, { time: t });

    // plants
    const baseY = H * 0.15 + H * 0.65 * 0.5;
    plants.forEach(p => {
      PixelSprites.drawPlantAtStage(ctx, p.x, baseY - 16, 2.5, p.stage, {
        time: t,
        petalColor: p.petalColor,
      });
    });

    // defense grid (center)
    const gridX = W * 0.42;
    const gridY = H * 0.50;
    PixelSprites.drawDefenseGrid(ctx, gridX, gridY, 90, {
      scanAngle: t * 0.8,
      pulsePhase: t * 2,
      time: t,
    });

    // animate pods (loop from left, pass through grid)
    pods.forEach(pod => {
      pod.x += pod.speed * (1/60);
      if (pod.x > W + 50) {
        pod.x = -50;
        // randomize y a bit
        pod.y = H * 0.3 + Math.random() * H * 0.4;
      }

      const podSize = 2.5;
      PixelSprites.drawPodComplete(ctx, pod.x, pod.y, podSize, pod.type, {
        time: t,
        velX: pod.speed * 0.1,
        velY: 0,
        label: pod.label,
      });
    });

    // trigger brain pulse every ~6 seconds
    if (t - lastPulseTime > 6) {
      brainPulses.push({ startTime: t });
      lastPulseTime = t;
    }
    brainPulses = brainPulses.filter(p => {
      const progress = (t - p.startTime) / 1.5;
      if (progress > 1) return false;
      PixelSprites.drawBrainPulse(ctx, gridX, gridY, progress, { maxRadius: 130 });
      return true;
    });

    // sparkles near greenhouse
    for (let i = 0; i < 3; i++) {
      const sparkProgress = ((t * 0.5 + i * 0.33) % 1);
      const sx = W * 0.7 + Math.sin(i * 2.5 + t) * 40;
      const sy = baseY - 10 + Math.cos(i * 1.7 + t) * 20;
      PixelSprites.drawSparkle(ctx, sx, sy, 4, sparkProgress, PixelSprites.colors.amber);
    }

    // scanlines
    PixelSprites.drawScanlines(ctx, W, H, { alpha: 0.025 });

    requestAnimationFrame(frame);
  }

  requestAnimationFrame(frame);
})();
</script>

</body>
</html>
